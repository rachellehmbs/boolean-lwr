\begin{tikzpicture}[scale=0.35]

\tikzset{SpongePerm/.style=rounded corners=4pt,};
\tikzset{edge/.style=-latex new, arrow head=3pt};
\tikzset{edgee/.style=latex new-latex new, arrow head=5pt};

%\path (8.5, -1) node {\textbf{Absorbing phase}};
%\path (25, -1) node {\textbf{Squeezing phase}};

%% 
\begin{scope}[xshift=0cm]
  \draw[fill=rouge!10] (0,0) rectangle ++(1,10);
  \draw (0,6) -- ++(1,0);

\node at (0.5,8) {$0^r$}; 
\node at (0.5,3) {$0^c$}; 

  \node[XOR] (xm0) at (1+1.5,8) {};
  \draw[edge] (1,8) -- (xm0);
  \draw[edge] (1,2) -- ++(3,0);
  \draw[edge] (1+1.5,10.5) node[above] { $X_{0}$} -- (xm0);  
  \draw[edge] (xm0) -- ++(1.5,0);

%	\draw[edgee,anchor=east] (-1,0) -- node[left] {$c$ bits} ++(0,6);
%	\draw[edgee,anchor=east] (-1,6) -- node[left] {$r$ bits} ++(0,4);

\end{scope}
  
\foreach \z in {1, ...,3} {
  %%  
  \begin{scope}[xshift=(\z)*4cm]
    \draw[SpongePerm,fill=vert3!10] 
    		(0,0) rectangle node {$\funcsponge$} ++(1,10);

    \node[XOR] (xm1) at (1+1.5,8) {};
    \draw[edge] (1,8) -- (xm1);
    \draw[edge] (1,2) -- ++(3,0);  
    \draw[edge] (1+1.5,10.5) node[above] { $X_{\z}$} -- (xm1);
    \draw[edge] (xm1) -- ++(1.5,0);
  \end{scope}
} 
  
%%  
\begin{scope}[xshift=16cm]
  \draw[SpongePerm,fill=vert3!10] 
  		(0,0) rectangle node {$\funcsponge$} ++(1,10);

\end{scope}

%%  
\begin{scope}[xshift=18cm]
%  \draw[fill=rouge!10] (0,0) rectangle ++(1,10);
%  \draw(0,6) -- ++(1,0);

  \draw[edge] (-1,2) -- ++(5,0);
  \draw[edge] (-1,8) -- ++(5,0);  
  \draw[edge] (1+1.5,8) -- ++(0,2.5) node[above] { $Y_{0}$};

\draw[dashed] (0.75,-1.5) -- ++(0,13);
\end{scope}

%%  
\begin{scope}[xshift=22cm]
  \draw[SpongePerm,fill=vert3!10] 
  		(0,0) rectangle node {$\funcsponge$} ++(1,10);

  \draw[edge] (1,2) -- ++(3,0);
  \draw[edge] (1,8) -- ++(3,0);  
  \draw[edge] (1+1.5,8) -- ++(0,2.5) node[above] { $Y_{1}$};
\end{scope}

%%  
\begin{scope}[xshift=26cm]
  \draw[SpongePerm,fill=vert3!10] (0,0) rectangle node {$\funcsponge$} ++(1,10);

  \draw[edge] (1,8) -- ++(1.5,0) -- ++(0,2.5) node[above] { $Y_{2}$};
\end{scope}

\end{tikzpicture}
