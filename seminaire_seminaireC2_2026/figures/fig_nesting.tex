\begin{figure}
  \centering
  % \colorlet{colorA}{red!0!green!50!white}
  % \colorlet{colorB}{red!33!green!50!white}
  % \colorlet{colorC}{red!67!green!50!white}
  % \colorlet{colorD}{red!100!green!50!white}
  
  \colorlet{colorA}{red!50!white}
  \colorlet{colorB}{colorA>wheel,1,4}
  \colorlet{colorC}{colorA>wheel,2,4}
  \colorlet{colorD}{colorA>wheel,3,4}
  
  \begin{tikzpicture}[xscale=.6,yscale=.6,
    level distance=1.2cm, sibling distance=1cm,
    edge from parent/.style={draw,<-}]
    \foreach \i in {0,1,...,6} {
      \node[point] (x\i) at ($(\i*360/7:1.25cm)$) {};
      \node at ($(\i*360/7:0.85cm)$) {{\scriptsize$x_{\i}$}};
    }    
    \foreach \i\j in {0/1,1/2,2/3,3/4,4/5,5/6,6/0} {
      \draw[->] (x\i) to (x\j);
    }
    \node[ipoint] at (x1) {} child[grow=right,shift={(0,-.3)}]
    { node[point] (tx6) {}
      child { node[point] (tx5) {} child { node[point] {} } child { node[point] (tx4) {} } }
      child { node[point] {} }
    };
    \node[ipoint] at (x2) {} child[grow=north east]
    { node[point] (tx3) {}
      child { node[point] {} }
      child { node[point] (tx2) {} child { node[point] {} } }
    };
    \node[ipoint] at (x3) {} child[grow=north west]
    { node[point] {}
      child { node[point] {} child { node[point] {} } }
    };
    \node[ipoint] at (x5) {} child[grow=west,shift={(0,-0.2)}]
    { node[point] (tx7) {}
      child { node[point] {} child { node[point] {} } child { node[point] {} } }
    };
    \node[ipoint] at (x6) {} child[grow=south]
    { node[point] (tx1) {}
      child { node[point] {} } child { node[point] (tx0) {} }
    };

    \foreach \i in {0,1,...,6} {
      \node[point] (xx\i) at ($(12,0)+(\i*360/7:1.25cm)$) {};
      \node at ($(12,0)+(\i*360/7:1.65cm)$) {{\scriptsize $x_{\i}$}};
    }    
    
    \begin{scope}[on background layer]
    
    \only<2->{
      \draw[line width=2pt,colorA,->] (xx0) -- (xx4);
      }
      \only<3->{
      \draw[line width=2pt,colorB,->] (xx4) -- (xx2);
      }
      \only<4->{
      \draw[line width=2pt,colorC,->] (xx2) -- (xx1);
      }
      \only<5->{
      \draw[line width=2pt,colorD,->,in=-45,out=15,looseness=25] (xx1) to (xx1);
}
    \only<2->{
      \node[point,minimum size=6pt,fill=colorA] at (x0) {};
      \draw[dashed,->,line width=2pt,colorA,bend right=40] (x0) to node[fill,circle] (g1) {} (tx2);
      \draw[line width=2pt,colorA,->] (tx2) -- (tx3) -- (x2) -- (x3) -- (x4);
}
\only<3->{
      \node[point,minimum size=6pt,fill=colorB] at (x4) {};
      \draw[dashed,->,line width=2pt,colorB,bend right=75,looseness=1.2] (x4) to node[fill,circle] (g2) {} (tx4);
      \draw[line width=2pt,colorB,->] (tx4) -- (tx5) -- (tx6) -- (x1) -- (x2);
}
\only<4->{
      \node[point,minimum size=6pt,fill=colorC] at (x2) {};
      \draw[dashed,->,line width=2pt,colorC,bend right=20,looseness=1] (x2) to node[pos=0.3,fill,circle] (g3) {} (tx0);
      \draw[line width=2pt,colorC] (tx0) -- (tx1) -- (x6);
      \draw[line width=2pt,colorC,transform canvas={shift={(154.3:-2pt)}}] (x6) -- (x0);
      \draw[line width=2pt,colorC,arrows={-To[harpoon,swap]},transform canvas={shift={(-154.3:-2pt)}}] (x0) -- (x1);
}
\only<5->{
      \node[point,minimum size=6pt,fill=colorD] at (x1) {};
      \draw[dashed,->,line width=2pt,colorD,bend right=90,looseness=1.75] (x1) to node[pos=0.6,fill,circle] (g4) {} (tx7);
      \draw[line width=2pt,colorD] (tx7) -- (x5) -- (x6);
      \draw[line width=2pt,colorD,transform canvas={shift={(154.3:2pt)}}] (x6) -- (x0);
      \draw[line width=2pt,colorD,arrows={-To[harpoon]},transform canvas={shift={(-154.3:2pt)}}] (x0) -- (x1);
      }
    \end{scope}
\only<2->{
    \node at (g1) {$\gamma$};
    }
    \only<3->{
    \node at (g2) {$\gamma$};
    }
    \only<4->{
    \node at (g3) {$\gamma$};
    }
    \only<5->{
    \node at (g4) {$\gamma$};
    }

\only<2->{
    \node[fill=colorA] at (7.5, 3  ) {{\scriptsize$g_{\cipherblock,\altblock}(x_0)=x_4$}};
    }
    \only<3->{
    \node[fill=colorB] at (7.5, 1.5) {{\scriptsize$g_{\cipherblock,\altblock}(x_4)=x_2$}};
    }
    \only<4->{
    \node[fill=colorC] at (7.5, 0  ) {{\scriptsize$g_{\cipherblock,\altblock}(x_2)=x_1$}};
    }
    \only<5->{
    \node[fill=colorD] at (7.5,-1.5) {{\scriptsize$g_{\cipherblock,\altblock}(x_1)=x_1$}};
    }
    \node at (12.3,3) {{\scriptsize Graph of $g_{\cipherblock,\altblock}$}};
    \node at (-1,3.5) {{\scriptsize Graph of $h_\cipherblock$}};

  \end{tikzpicture}



\end{figure}

